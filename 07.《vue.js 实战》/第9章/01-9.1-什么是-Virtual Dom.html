<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>什么是-Virtual Dom</title>
</head>
<body>
  <!-- React 和 Vue 2 都使用了 Virtual Dom 技术，Virtual Dom 并不是真正意义上的 DOM，
    而是一个轻量级的 JavaScript 对象，在状态发生变化时，Virtual Dom 会进行 Diff 运算，
    来更新需要被替换的 DOM，而不是全部重绘。-->
  <!-- 与 DOM 操作相比，Virtual Dom 是基于 JavaScript 计算的，所以开销会小很多。 -->

    <script>
      // 用 Virtual Dom 创建的 JavaScript 对象一般会是这样的：
      var vNode = {
        tag: 'div',
        attributes: {
          id: 'main'
        },
        chindren: [
          // p节点
        ]
      }


      /*
       * vNode 对象通过一些特定的选项描述了真实的 DOM 结构。
       * 在 Vue.js 2 中，Virtual Dom 就是通过一种 VNode 类表达的，
       * 每个 DOM 元素或组件都对应一个 VNode 对象，在 Vue.js 源码中是这样定义的：
       */

      export interface VNode{
        tag?: string;
        data?: VNodeData;
        children?: VNode[];
        text?: string;
        elm?: Node;
        ns?: string;
        context?: Vue;
        key?: string | number;
        componentOptions?: VNodeComponentOptions;
        componentInstance?: Vue;
        parent?: VNode;
        raw?: boolean;
        isStatic?: boolean;
        isRootInsert: boolean;
        isComment: boolean;
      }

      // 具体含义如下：
      /*
       * tag  当前节点的标签名。
       * data  当前节点的数据对象。
       * children  子节点，数组，也是 VNode 类型。
       * text  当前节点的文本，一般文本节点或注释节点会有该属性。
       * elm  当前虚拟节点对应的真实的 DOM 节点。
       * ns  节点的 namespace。
       * content  编译作用域。
       * functionalContext  函数化组件的作用域。
       * key  节点的 key 属性，用于作为节点的标识，有利于 patch 的优化。
       * componentOptions  创建组件实例时会用到的选项信息。
       * child  当前节点对应的组件实例。
       * parent 组件的占位节点。
       * raw  原始 html。
       * isStatic  静态节点的标识。
       * isRootInsert  是否作为根节点插入，被 <transition> 包裹的节点，该属性的值为 false。
       * isComment  当前节点是否是注释节点。
       * isCloned  当前节点是否为克隆节点。
       * isOnce  当前节点是否有 v-once 指令。
       */


       // VNode 主要可以分为如下几类:

       /*
        * TextVNode 文本节点。
        * ElementVNode 普通元素节点。
        * ComponentVNode 组件节点。
        * EmptyVNode 没有内容的注释节点。
        * CloneVNode 克隆节点，可以是以上任意类型的节点，唯一的区别在于 isCloned 属性为 true。
        */
    </script>
</body>
</html>